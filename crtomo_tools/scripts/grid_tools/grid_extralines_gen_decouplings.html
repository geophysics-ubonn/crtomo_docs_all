
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>grid_extralines_gen_decouplings module &#8212; crtomo tools 0.1 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/gallery.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="grid_gen_decouplings module" href="grid_gen_decouplings.html" />
    <link rel="prev" title="cr_trig_parse_gmsh module" href="cr_trig_parse_gmsh.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-grid_extralines_gen_decouplings">
<span id="grid-extralines-gen-decouplings-module"></span><h1>grid_extralines_gen_decouplings module<a class="headerlink" href="#module-grid_extralines_gen_decouplings" title="Permalink to this headline">¶</a></h1>
<p>Generate a decouplings.dat for CRTomo</p>
<p>From a given extra_lines.dat file (see triangular grid generation in manual),
generate a decouplings.dat for the decoupling of cell interfaces from the
regularisation.</p>
<p>As only the start and end points are given, the algorithm must find all nodes
generated by GMSH along those lines. This is done by comparing the orthogonal
distance of each node to the line. All nodes within a certain threshold
distance are assumed to lie on the line. The threshold is computed by taking
the minimal node distance of the grid (pdist function) and then multiplying
with 0.75. This probably is a little bit overkill and we could also use some
measure of machine precision.</p>
<p>For convenience this threshold can be overwritten using the –eps option.</p>
<p>Some of the for-loops can probably be optimized or replaced by some numpy
broadcasting rules.</p>
<p class="rubric">Examples</p>
<p># enter the output directory of cr_trig_create.py
grid_extralines_gen_decouplings.py
# this create the file decouplings.dat</p>
<p>grid_extralines_gen_decouplings.py –plot_node_nrs –plot_elm_nrs</p>
<dl class="function">
<dt id="grid_extralines_gen_decouplings.check_options">
<code class="descclassname">grid_extralines_gen_decouplings.</code><code class="descname">check_options</code><span class="sig-paren">(</span><em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#grid_extralines_gen_decouplings.check_options" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="grid_extralines_gen_decouplings.debug_plot">
<code class="descclassname">grid_extralines_gen_decouplings.</code><code class="descname">debug_plot</code><span class="sig-paren">(</span><em>grid</em>, <em>extra_lines</em>, <em>decoupling_elements</em>, <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#grid_extralines_gen_decouplings.debug_plot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="grid_extralines_gen_decouplings.distances">
<code class="descclassname">grid_extralines_gen_decouplings.</code><code class="descname">distances</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>px</em>, <em>py</em>, <em>plot=False</em><span class="sig-paren">)</span><a class="headerlink" href="#grid_extralines_gen_decouplings.distances" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute shortest distance of points (px, py) to the line described by the
end points in (x, y).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong><strong>,</strong><strong>y</strong> (<em>x and y coordinates of line</em>) – </li>
<li><strong>px</strong> (<em>x coordinates of data points</em>) – </li>
<li><strong>py</strong> (<em>y coordiante of data points</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>distances</strong></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list of distances</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="grid_extralines_gen_decouplings.get_decouplings_for_line">
<code class="descclassname">grid_extralines_gen_decouplings.</code><code class="descname">get_decouplings_for_line</code><span class="sig-paren">(</span><em>grid</em>, <em>line</em>, <em>settings</em>, <em>fids=None</em><span class="sig-paren">)</span><a class="headerlink" href="#grid_extralines_gen_decouplings.get_decouplings_for_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the element pairs for regulazisation decoupling, given a grid
object and a line, denoted by start and end coordinates, in the grid.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>grid</strong> (<em>a crtomo.grid.crt_grid object</em>) – </li>
<li><strong>line</strong> (<em>np.array/list with 4 entries: x1</em><em>, </em><em>y1</em><em>, </em><em>x2</em><em>, </em><em>x2</em><em>, </em><em>denoting start and end</em>) – point</li>
<li><strong>fids</strong> (<em>None</em><em>, </em><em>or: list with file ids for</em>) – debug_nodes</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>neighbors</strong> – line</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Mx2 array with the numbers of adjoining elements along the given</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="grid_extralines_gen_decouplings.handle_cmd_options">
<code class="descclassname">grid_extralines_gen_decouplings.</code><code class="descname">handle_cmd_options</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#grid_extralines_gen_decouplings.handle_cmd_options" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="grid_extralines_gen_decouplings.line_line_intersect">
<code class="descclassname">grid_extralines_gen_decouplings.</code><code class="descname">line_line_intersect</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="headerlink" href="#grid_extralines_gen_decouplings.line_line_intersect" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the intersection point of two lines</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>= x4 array</strong> (<em>y</em>) – </li>
<li><strong>= x4 array</strong> – </li>
<li><strong>1 is defined by p1</strong><strong>,</strong><strong>p2</strong> (<em>line</em>) – </li>
<li><strong>2 is defined by p3</strong><strong>,</strong><strong>p4</strong> (<em>line</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>Ix</strong> (<em>x-coordinate of intersection</em>)</li>
<li><strong>Iy</strong> (<em>y-coordinate of intersection</em>)</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="grid_extralines_gen_decouplings.main">
<code class="descclassname">grid_extralines_gen_decouplings.</code><code class="descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#grid_extralines_gen_decouplings.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">crtomo tools</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../_examples/index.html">Examples for crtomo_tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_examples/index.html#examples-grid-handling">Examples: Grid handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_examples/index.html#examples-modelling">Examples: Modelling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_examples/index.html#examples-postprocessing-of-inversion-results">Examples: Postprocessing of inversion results</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">src</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cr_get_analytical_solutions.html">cr_get_analytical_solutions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cr_get_modelling_errors.html">cr_get_modelling_errors module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cr_trig_create.html">cr_trig_create module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cr_trig_parse_gmsh.html">cr_trig_parse_gmsh module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">grid_extralines_gen_decouplings module</a></li>
<li class="toctree-l2"><a class="reference internal" href="grid_gen_decouplings.html">grid_gen_decouplings module</a></li>
<li class="toctree-l2"><a class="reference internal" href="grid_gen_depth_decoupling.html">grid_gen_depth_decoupling module</a></li>
<li class="toctree-l2"><a class="reference internal" href="grid_homogenize.html">grid_homogenize module</a></li>
<li class="toctree-l2"><a class="reference internal" href="grid_plot_elem_angles.html">grid_plot_elem_angles module</a></li>
<li class="toctree-l2"><a class="reference internal" href="grid_plot_wireframe.html">grid_plot_wireframe module</a></li>
<li class="toctree-l2"><a class="reference internal" href="grid_rotate.html">grid_rotate module</a></li>
<li class="toctree-l2"><a class="reference internal" href="grid_translate.html">grid_translate module</a></li>
<li class="toctree-l2"><a class="reference internal" href="grid_translate_model.html">grid_translate_model module</a></li>
<li class="toctree-l2"><a class="reference internal" href="sd_plot.html">sd_plot module</a></li>
<li class="toctree-l2"><a class="reference internal" href="sens_center_plot.html">sens_center_plot module</a></li>
<li class="toctree-l2"><a class="reference internal" href="td_clean.html">td_clean module</a></li>
<li class="toctree-l2"><a class="reference internal" href="td_correct_temperature.html">td_correct_temperature module</a></li>
<li class="toctree-l2"><a class="reference internal" href="td_init.html">td_init module</a></li>
<li class="toctree-l2"><a class="reference internal" href="td_plot.html">td_plot module</a></li>
<li class="toctree-l2"><a class="reference internal" href="td_residuals.html">td_residuals module</a></li>
<li class="toctree-l2"><a class="reference internal" href="td_run_all_local.html">td_run_all_local module</a></li>
<li class="toctree-l2"><a class="reference internal" href="td_test.html">td_test module</a></li>
<li class="toctree-l2"><a class="reference internal" href="volt_correct_temperature.html">volt_correct_temperature module</a></li>
<li class="toctree-l2"><a class="reference internal" href="volt_histogram.html">volt_histogram module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../api/modules.html">lib</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="modules.html">src</a><ul>
      <li>Previous: <a href="cr_trig_parse_gmsh.html" title="previous chapter">cr_trig_parse_gmsh module</a></li>
      <li>Next: <a href="grid_gen_decouplings.html" title="next chapter">grid_gen_decouplings module</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, CRTomo contributors.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.7</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
      |
      <a href="../../_sources/scripts/grid_tools/grid_extralines_gen_decouplings.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>